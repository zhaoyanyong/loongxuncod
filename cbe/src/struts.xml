<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"
    "http://struts.apache.org/dtds/struts-2.1.7.dtd">
<struts>
	<!-- 這句的目的是让spring管理struts -->
	 <constant name="struts.objectFactory" value="spring" /> 
	  <!-- 当struts的配置文件修改后,系统是否自动重新加载该文件,默认值为false(生产环境下使用),开发阶段最好打开 -->
    <constant name="struts.configuration.xml.reload" value="true" />
    <!-- 上传的全部图片的最大限制-->
     <constant name="struts.multipart.maxSize" value="1000000000" />
	<constant name="struts.devMode" value="true" />
	<constant name="struts.i18n.encoding" value="utf-8" />
	 <constant name="struts.custom.i18n.resources" value="messageResource"/>
	<!-- 公共的包，封装了通用的拦截器、通用的result -->
	<package name="CBE" extends="json-default">
		<interceptors>
			<!-- 登录检查拦截器 -->
			<interceptor name="loginInterceptor"
				class="com.loongxun.cbe.interceptor.LoginInterceptor"></interceptor>

			<!-- 登录检查拦截器栈 -->
			<interceptor-stack name="loginInterceptorStack">
				<interceptor-ref name="loginInterceptor"></interceptor-ref>
				<interceptor-ref name="defaultStack"></interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="loginInterceptorStack"></default-interceptor-ref>
		<global-results>
			<!-- 跳转到登录页面的result -->
			<result name="login" type="redirectAction">
				<param name="namespace">login</param>
				<param name="actionName">/tologin</param>
			</result>
			<!-- 统一的错误页面 -->
			<result name="error">
				/error.jsp
		</result>
		</global-results>
	
	</package>
	<!-- 登录模块login -->
	<package name="login" extends="struts-default">
		<action name="tologin">
			<result name="success">
				/login.jsp
		</result>
		</action>
		<!-- 点击登录按钮时，表单提交验证的action -->
		<action name="login" class="loginAction">
			<!-- 成功则去首页 -->
			<result name="success">
				/WEB-INF/index.jsp
		</result>
			<result name="fail">
				/login.jsp
			</result>
		</action>
			<!-- 验证码图片 -->
		<action name="validateCode"
			class="com.loongxun.cbe.user.action.ValidateCodeAction">
			<result name="success" type="stream">
				<param name="inputName">codeStream</param>
			</result>
		</action>
	</package>
	<package name="register" extends="struts-default">
		<!-- 企业注册-->
		<action name="register" class="com.loongxun.cbe.user.action.EnterpriseController"
			method="register">
				<result name="success" type="redirectAction">
				<param name="actionName">tologin</param>
   			 </result>
			<result name="input">
				register.jsp
  			  </result>
			<!-- 限制图片的格式和图片的大小 -->
            <interceptor-ref name="fileUpload">
                <param name="allowedTypes">
                    image/bmp,image/png,image/gif,image/jpeg,image/jpg
                </param>
                <param name="maximumSize">1000000000</param>
            </interceptor-ref>
            <!-- 默认的拦截器，必须要写 -->
            <interceptor-ref name="defaultStack" />
		
		</action>
		</package>
		<package name="controllerpackge" extends="CBE">
		<action name="findEnter" class="com.loongxun.cbe.user.action.EnterpriseController"
			method="enterpriseInfo">
			<result name="right">/WEB-INF/right.jsp</result>
			<result name="listAttribute">/WEB-INF/attributeinfo/listAttribute.jsp</result>
			</action>
			
			
			<action name="findJudge" class="com.loongxun.cbe.user.action.EnterpriseController"
			method="findJudge">
			<result name="right">/WEB-INF/right.jsp</result>
			<result name="listAttributeJudge">/WEB-INF/attributeinfo/listAttributeJudge.jsp</result>
			</action>
			
			
			<action name="searchEnterprise" class="com.loongxun.cbe.user.action.EnterpriseController"
			method="searchEnterprise">
			<result name="right">/WEB-INF/right.jsp</result>
			<result name="listAttribute">/WEB-INF/attributeinfo/listAttribute.jsp</result>
			</action>
			<action name="toUpdateEnterprise" class="com.loongxun.cbe.user.action.EnterpriseController"
			method="toUpdateEnterprise">
			<result name="LOOK">/WEB-INF/companyinfo/lookCompany.jsp</result>
			<result name="UPDATE">/WEB-INF/companyinfo/updateCompany.jsp</result>
			</action>
			<action name="updateEnterprise" class="com.loongxun.cbe.user.action.EnterpriseController"
			method="updateEnterprise">
			<result type="chain" name="findEnter" >findEnter</result>
			<result name="input">
				/WEB-INF/companyinfo/updateCompany.jsp
  			  </result>
			<!-- 限制图片的格式和图片的大小 -->
            <interceptor-ref name="fileUpload">
                <param name="allowedTypes">
                    image/bmp,image/png,image/gif,image/jpeg,image/jpg
                </param>
                <param name="maximumSize">1000000000</param>
            </interceptor-ref>
            <!-- 默认的拦截器，必须要写 -->
            <interceptor-ref name="defaultStack" />
			</action>
			<action name="delEnterprise" class="com.loongxun.cbe.user.action.EnterpriseController"
			method="delateEnterprise">
			<result name="del" type="chain">findEnter</result>
			</action>
	</package>
	<package name="attributecontorller" extends="CBE" namespace="">
		<action name="*_Attribute" class="com.loongxun.cbe.enterprise.action.AttributeController" method="{1}">
		<result name="{1}">/WEB-INF/attributeinfo/{1}.jsp</result>
		<result name="moreAttributeTWO" type="chain">moreAttribute_Attribute</result>
		
		</action>
		<action name="AnalysisAttribute" class="AnalysisAttribute" method="Analy">
		<result >/WEB-INF/attributeinfo/analySucess.jsp</result>
		</action>
		<action name="AnalysiscomAnaly" class="AnalysisAttribute" method="comAnaly">
			<result name="resultjsp" >/WEB-INF/dataanalysis/dateanalyseresult.jsp</result>
		</action>
		<!-- 查看分析数据 -->
		<!-- 查看分析数据企业规模指标 -->
		<action name="findEnterprisescale" class="finddataTotalScoerAction" method="secondSearch">
		<result name="success1">/WEB-INF/dataanalysis/companySize.jsp</result>
		</action>
		<!-- 查看分析数据企业偿债能力 -->
		<action name="findSolvency" class="finddataTotalScoerAction" method="secondSearch">
		<result name="success1">/WEB-INF/dataanalysis/payPower.jsp</result>
		</action>
			<!-- 查看分析数据营运能力 -->
			<action name="findOperational" class="finddataTotalScoerAction"
			method="secondSearch">
			<result name="success1">
				/WEB-INF/dataanalysis/run.jsp
        </result>
		</action>
		<!-- 查看分析数据盈利能力 -->
			<action name="findProfitability" class="finddataTotalScoerAction"
			method="secondSearch">
			<result name="success1">
				/WEB-INF/dataanalysis/gainPower.jsp
        </result>
		</action>
		<!-- 查看数据分析成长性指标-->
		<action name="findGrowth" class="finddataTotalScoerAction"
			method="secondSearch">
			<result name="success1">
					/WEB-INF/dataanalysis/growth.jsp
        </result>
		</action>
			<!-- 查看数据分析创新性指标-->
		<action name="findInnovation" class="finddataTotalScoerAction"
			method="secondSearch">
			<result name="success1">
				/WEB-INF/dataanalysis/creative.jsp
        </result>
		</action>
			<!-- 查看数据分析信用履约能力指标-->
		<action name="findperformance" class="finddataTotalScoerAction"
			method="performanceDetail">
			<result name="success1">
				/WEB-INF/dataanalysis/creditPerformance.jsp
        </result>
		</action>
			<!-- 查看数据分析管理水平-->
		<action name="findManagement" class="finddataTotalScoerAction"
			method="managePowerDetail">
			<result name="success">
				/WEB-INF/dataanalysis/managePower.jsp
        </result>
		</action>
			<!-- 查看数据分析市场竞争力-->
		<action name="findcompetitiveness" class="finddataTotalScoerAction"
			method="marketCompeteDetail">
			<result name="success">
				/WEB-INF/dataanalysis/marketCompetitive.jsp
        </result>
		</action>
				<!-- 查看评级报告 -->
		<action name="findRatingReport" class="findRatingReportAction">
			<result name="success">
				/WEB-INF/rating/ratingreport.jsp
		</result>
		</action>
	</package>
	<package name="frame" extends="CBE" namespace="">
	<action name="showright_*_*" method="{2}"  class="com.loongxun.cbe.until.ToFrameController">
		<result name="{2}">
				/WEB-INF/{1}/{2}.jsp
		</result>
		</action>
		<action name="framtop" >
		<result name="success">
				/WEB-INF/top.jsp
		</result>
		</action>
			<action name="frammain" >
		<result name="success">
				/WEB-INF/center.jsp
		</result>
		</action>
			<action name="framleft" class="baseAction" >
		<result name="success">
		
				/WEB-INF/left.jsp
		</result>
		</action>
			<action name="framright" >
		<result name="success">
				/WEB-INF/right.jsp
		</result>
		</action>
	</package>
	<!--ajax包  -->
	<package name="ajaxPack" extends="json-default,CBE">
		<!--企业用户名是否存在  -->
		<action name="uniqueUserName" class="com.loongxun.cbe.user.support.UniqueUserName"
			method="uniqueName">
			<result name="success" type="json"></result>
		</action>
	</package>
<!-- 权限管理 -->
	<package name="sys" extends="CBE">
		<!-- 查看所有角色 -->
		<action name="findRoles" class="roleAction" method="findAllRole">
			<result name="success">
				/WEB-INF/role/findRoles.jsp
  			  </result>
		</action>
		<!-- 修改角色 -->
		<action name="toUpdateRole" class="roleAction" method="toUpdateRole">
			<result name="success">
				/WEB-INF/role/updateRoles.jsp
  			  </result>
		</action>
		<!-- 修改角色 -->
		<action name="updateRole" class="roleAction" method="updateRole">
		<result name="success" type="redirectAction">
				<param name="actionName">findRoles</param>
   			 </result>
		</action>
		<!-- 用户列表 -->
		<action name="userList" class="userAction" method="userList">
		<result name="success">
				/WEB-INF/user/userList.jsp
  			  </result>
		</action>
		<!-- 用户详情 -->
		<action name="userDetail" class="userAction" method="userDetail">
		<result name="success">
				/WEB-INF/user/userDetail.jsp
  			  </result>
		</action>
		<!-- 修改用户信息 -->
		<action name="toUpdateUser" class="userAction" method="toUpdateUser">
		<result name="success">
				/WEB-INF/user/updateUser.jsp
  			  </result>
		</action>
		<!-- 修改用户信息 -->
		<action name="updateUser" class="userAction" method="updateUser">
		<result name="success" type="redirectAction">
				<param name="actionName">userList</param>
   			 </result>
		</action>
		<!-- 删除用户信息 -->
		<action name="delUser" class="userAction" method="delUser">
		<result name="success" type="redirectAction">
				<param name="actionName">userList</param>
   			 </result>
		</action>
		<!-- 跳转到添加用户页面 -->
		<action name="toAddUser">
		<result name="success">
				/WEB-INF/user/addUser.jsp
  			  </result>
		</action>
		
		<!-- 跳转到修改密码页面 -->
		<action name="toUpdatePassword">
		<result name="success">
				/WEB-INF/user/updatePassword.jsp
  			  </result>
		</action>
		
		<!-- 判断账号的唯一性 -->
		<action name="checkAdminName" class="userAction" method="checkAdminName">
		<result name="success" type="json">
				<param name="root">isSucc</param>
			</result>
		</action>
		<!-- 保存用户 -->
		<action name="saveUser" class="userAction" method="saveUser">
		<result name="success" type="redirectAction">
				<param name="actionName">userList</param>
   			 </result>
		</action>
		<action name="logAction" class="logAction">
			<result name="success">
				/WEB-INF/role/logList.jsp
  			  </result>
		</action>
		<!-- 修改密码-->
		<action name="updatePwd" class="updatePwdAction" >
		<result name="success" type="redirectAction" >
		       toUpdatePassword
           </result>
		</action>
	</package>
	<!-- 退出登录 -->
	<package name="loginOutAction" extends="struts-default">
		<action name="logout" class="com.loongxun.cbe.user.action.LogoutAction" method="logOut">
			<result name="success">
				/login.jsp
   			 </result>
		</action>
	</package>
	<!-- 数据分析 -->
	<package name="dataAnalysis" extends="CBE" namespace="">
		<action name="showDataAnalysis_*_*" method="{2}"  class="dataAnalysis">
			<result name="{2}">
				/WEB-INF/{1}/{2}.jsp
			</result>
		</action>
	</package>
	<!-- 评定查询 -->
	<package name="rating" extends="CBE" namespace="">
		<action name="showRating_*_*" method="{2}"  class="findallRatingAction">
			<result name="{2}">
				/WEB-INF/{1}/{2}.jsp
			</result>
		</action>
	</package>
</struts>
